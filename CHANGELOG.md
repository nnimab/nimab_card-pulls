# 更新日誌

所有專案的顯著變更都將記錄在此檔案中。

## [2.0.0] - 2024-07-12

### 新增

- 增加了卡片圖片，提升視覺效果
- 修改了整體介面樣式，優化用戶體驗

### 修改檔案

- 更新了 `images/` 目錄中的圖片資源
- 修改了 `styles/` 中的 CSS 樣式
- 更新了多個卡片描述文件

## [1.3.4] - 2024-07-11

### 修復

- 修正了卡片詳細頁面頂部主標題（如"✧ 52 良為山 ✧"）未居中的問題
- 調整了標題和星形符號的顯示方式，確保標題整體居中顯示

### 修改檔案

- 修改 `styles/main.css`：
  - 為 `.card-detail-text h1` 添加了 `width: 100%`、`position: relative` 和 `display: inline-block` 屬性
  - 修改了 `.card-detail-text h1::before` 和 `.card-detail-text h1::after` 樣式，確保星形符號正確顯示
  - 設置了 `margin: 0 auto 0.5em` 確保標題居中

## [1.3.3] - 2024-07-11

### 修復

- 將卡片詳細頁面中的卡名標題（如"37 風火家人"）設為置中對齊，優化視覺效果

### 修改檔案

- 修改 `styles/main.css`：
  - 為 `.full-card-number` 添加了 `text-align: center` 屬性，使卡片標題居中顯示

## [1.3.2] - 2024-07-11

### 修復

- 將卡片詳細頁面中的標題設為置中對齊，優化視覺效果
- 修正了"基本資訊"、"卦詞"和"說明"等 h2 標題沒有置中的問題

### 修改檔案

- 修改 `styles/main.css`：
  - 為 `.card-detail-text h1` 添加了 `text-align: center` 屬性，使標題居中顯示
  - 為 `.card-detail-text h2` 添加了 `text-align: center` 屬性，確保"基本資訊"、"卦詞"和"說明"等標題居中顯示

## [1.3.1] - 2024-07-11

### 修復

- 修正了卡片詳細頁面中文字傾斜的問題
- 減少了說明文字段落之間的間距，優化了閱讀體驗

### 修改檔案

- 修改 `styles/main.css`：
  - 將 `.card-detail-text` 的 `white-space` 屬性從 `pre-line` 修改為 `normal`，解決文字傾斜問題
  - 將 `.card-detail-text p` 的 `margin-bottom` 從 `1em` 減小到 `0.5em`，減少段落間隔

## [1.3.0] - 2024-07-10

### 修復

- 徹底修復了"清除所有卡片"按鈕位置歪掉的問題
- 重寫了所有按鈕相關的樣式，採用強制優先級確保樣式正確應用
- 移除了所有可能導致按鈕位置偏移的 transform 屬性
- 統一了不同媒體查詢下按鈕的樣式，避免樣式衝突
- 採用 !important 確保樣式不會被其他規則覆蓋

### 修改檔案

- 修改 `styles/main.css`：
  - 重寫了 `.clear-btn` 的所有樣式，採用 !important 確保樣式優先級
  - 修改了 `:hover`、`:active` 和 `:disabled` 狀態下的樣式，移除可能導致偏移的 transform 屬性
  - 簡化了媒體查詢中的按鈕樣式，只保留必要的尺寸調整
  - 統一了所有斷點下按鈕的定位方式，確保在所有設備上居中顯示

## [1.2.9] - 2024-07-10

### 修復

- 修復了"清除所有卡片"按鈕位置歪掉的問題
- 優化了按鈕的水平置中效果，使其在容器中居中顯示
- 添加了顯示屬性，確保按鈕正確渲染

### 修改檔案

- 修改 `styles/main.css`：
  - 將 `clear-btn` 的 `margin-top: 5px` 改為 `margin: 5px auto 0 auto`，實現水平置中
  - 為 `clear-btn` 添加了 `display: block` 屬性，確保正確的塊級顯示行為

## [1.2.8] - 2024-07-10

### 修復

- 修復了滾動提示箭頭與"清除所有卡片"按鈕重疊的問題
- 調整了右側放置區域的內部元素間距，優化整體佈局
- 重新分配了卡槽容器的高度，確保各元素有適當的空間
- 優化了滾動提示箭頭的高度和行高，使其更加協調
- 微調了清除按鈕的外邊距設置，避免與其他元素衝突

### 修改檔案

- 修改 `styles/main.css`：
  - 將 `display-area` 的 `gap` 從 20px 減小到 10px，使元素間距更加緊湊
  - 將 `card-slots-container` 的高度從 `calc(100% - 50px)` 調整為 `calc(100% - 80px)`，為其他元素預留空間
  - 將 `scroll-indicator` 的 `margin` 重置為0，並減小高度至20px
  - 為 `scroll-indicator` 添加了 `line-height: 1`，優化文本顯示
  - 調整了 `clear-btn` 的 `margin-top` 為 5px，與其他元素保持適當間距

## [1.2.7] - 2024-07-10

### 改進

- 大幅增強了滾動提示箭頭的可見性，使其更加醒目
- 增大了箭頭的尺寸和亮度，並調整了動畫效果
- 添加了智能顯示功能，只在有內容可滾動時才顯示箭頭
- 增加了點擊箭頭自動滾動的功能，方便用戶操作
- 優化了箭頭的視覺效果，添加了多層發光效果

### 修改檔案

- 修改 `styles/main.css`：
  - 將箭頭字體大小從 1rem 增加到 1.6rem
  - 將不透明度從 0.7 調整為 1.0，使其更加明顯
  - 增強了文字陰影效果，添加了雙層發光
  - 替換了之前的彈跳動畫，改為更平滑的上下移動和淡入淡出效果
  - 添加了 z-index: 10，確保箭頭始終顯示在其他元素上方
  
- 修改 `scripts/main.js`：
  - 添加了 `checkScrollIndicator` 函數，用於檢測內容是否可滾動
  - 在頁面加載和窗口大小改變時檢查是否需要顯示箭頭
  - 添加了箭頭點擊事件，點擊時自動向下滾動內容

## [1.2.6] - 2024-07-10

### 改進

- 在右側放置區域添加了滾動提示箭頭，提示用戶可以向下滾動查看更多內容
- 為滾動箭頭添加了閃爍動畫效果，增強用戶體驗
- 箭頭採用與系統主色調一致的顏色和光效，保持整體設計風格的一致性

### 修改檔案

- 修改 `index.html`：
  - 在 `card-slots-container` 和 `clear-btn` 按鈕之間添加了 `scroll-indicator` 元素
  
- 修改 `styles/main.css`：
  - 添加了 `.scroll-indicator` 樣式，設置了文字對齊、顏色、不透明度等屬性
  - 添加了 `.scroll-indicator span` 樣式，設置了文字陰影效果
  - 創建了 `@keyframes bounce` 動畫，實現箭頭的彈跳效果
  - 將箭頭的動畫週期設為 1.5 秒，並設置為無限循環

## [1.2.5] - 2024-07-10

### 改進

- 調整了標題區域位置，使其與左側扇形卡牌區域置中對齊
- 優化了標題區域的上下邊距，提高整體佈局美觀度
- 將右側放置區向上移動，並增加了上邊距以優化佈局
- 隱藏了滾動條，保持整體界面美觀性
- 減少了主容器的高度，使整體佈局更加緊湊

### 修改檔案

- 修改 `styles/main.css`：
  - 將 `header` 的 `text-align` 改回 `center`
  - 調整 `header` 的 `padding` 為 `20px 0 10px 0`
  - 優化 `header` 的 `margin` 為 `0 auto 0 25%`
  - 將 `subtitle` 的上下邊距從 `12px` 減小到 `10px`
  - 將 `cards-container` 的高度從 `calc(100vh - 120px)` 調整為 `calc(100vh - 100px)`
  - 移除了 `cards-container` 的 `margin-top: -10px`
  - 為 `display-area` 添加了 `margin-top: 5px`
  - 為 `card-slots-container` 添加了隱藏滾動條的CSS樣式

## [1.2.4] - 2024-07-10

### 改進

- 調整了頁面標題和說明文字的位置，使其與左側扇型卡牌對齊
- 縮小了標題字體大小，使整體佈局更加協調
- 修改了右側卡牌放置區域的滾動機制，避免出現獨立滾動條
- 優化了整體頁面佈局，提升了用戶體驗

### 修改檔案

- 修改 `styles/main.css`：
  - 將 `header` 的 `text-align` 從 `center` 改為 `left`
  - 添加了 `width: 50%` 和 `margin-left: 25%` 屬性到 `header` 中
  - 將 `h1` 的 `font-size` 從 `3.5rem` 縮小到 `2.8rem`
  - 將 `subtitle` 的 `font-size` 從 `1.2rem` 縮小到 `1rem`
  - 將 `cards-container` 的 `align-items` 從 `center` 改為 `flex-start`
  - 將 `display-area` 的 `overflow-y: auto` 改為 `overflow: hidden`
  - 移除了 `display-area` 的滾動相關屬性
  - 為 `card-slots-container` 添加了 `overflow-y: auto` 和 `height: calc(100% - 50px)`

## [1.2.3] - 2024-07-09

### 修復

- 徹底修復了遮罩層阻止點擊確認按鈕的問題
- 將確認對話框改為 fixed 定位，避免受父元素影響
- 大幅提高確認對話框的 z-index，確保在最上層
- 修改 JavaScript 代碼，將確認對話框臨時移至 body 的最後
- 增強了按鈕的點擊事件處理，添加了防止默認行為的代碼
- 添加了調試日誌，幫助追蹤點擊事件的處理過程

### 修改檔案

- 修改 `styles/main.css`：
  - 將 `.overlay` 的 pointer-events 設置為 none !important
  - 將 `.confirm-dialog` 的 position 從 absolute 改為 fixed
  - 將 `.confirm-dialog` 的 z-index 從 1600 提高到 2000
  - 為 `.confirm-dialog` 添加了 pointer-events: auto !important

- 修改 `scripts/main.js`：
  - 更新了 `showConfirmDialog` 函數，將確認對話框移至 body 的最後
  - 更新了 `hideConfirmDialog` 函數，將確認對話框放回原位
  - 修改了確認和取消按鈕的事件監聽器，添加了 preventDefault 調用
  - 移除了遮罩層的點擊事件監聽器，因為遮罩層已禁用點擊事件

## [1.2.2] - 2024-07-09

### 修復

- 修復了遮罩層阻止點擊確認按鈕的嚴重問題
- 將遮罩層的 pointer-events 設置為 none，使其不再攔截點擊事件
- 確保確認對話框、按鈕和選中的卡片都能正確接收點擊事件
- 優化了各元素的 z-index 層級，確保正確的顯示順序

### 修改檔案

- 修改 `styles/main.css`：
  - 更新了 `.overlay` 樣式，禁用了點擊事件攔截
  - 為 `.confirm-dialog`、`.confirm-dialog span`、`.confirm-dialog button` 和 `.card.selected` 添加了 pointer-events: auto 屬性
  - 確保所有交互元素的 z-index 設置正確

## [1.2.1] - 2024-07-09

### 修復

- 修復了抽卡確認對話框和遮罩層顯示不明顯的問題
- 優化了確認對話框的視覺設計，添加了邊框、陰影和動畫效果
- 改進了遮罩層的透明度和模糊效果，使其更加明顯
- 增強了被選中卡片的視覺效果，添加了脈動發光動畫
- 優化了未選中卡片的變暗效果，添加了灰度濾鏡和縮放效果

### 修改檔案

- 修改 `styles/main.css`：
  - 更新了 `.overlay` 樣式，調整了背景色和模糊效果
  - 重新設計了 `.confirm-dialog` 樣式，添加了邊框、陰影和動畫
  - 優化了確認和取消按鈕的樣式和交互效果
  - 為被選中的卡片添加了脈動發光動畫
  - 改進了未選中卡片的變暗效果

## [1.2.0] - 2024-07-09

### 改進

- 全面優化界面設計，採用線上遊戲風格的視覺效果
- 添加精美的背景圖片和半透明漸變覆蓋層
- 重新設計標題區域，添加裝飾性元素和金色標題
- 優化卡片設計，添加光澤效果和懸停動畫
- 美化按鈕樣式，添加發光效果和動畫
- 重新設計卡片放置區域，添加半透明背景和邊框
- 優化卡片詳細視圖，添加精美的過渡動畫和視覺效果
- 改進響應式設計，確保在各種設備上的良好顯示效果

### 修改檔案

- 修改 `styles/main.css`：
  - 更新全局變量和顏色方案
  - 添加背景圖片和覆蓋層
  - 重新設計所有界面元素的樣式
  - 添加多種動畫和過渡效果
  - 優化響應式設計規則

## [1.1.12] - 2024-07-09

### 修改

- 將所有卡片的五行屬性顏色統一設置為白色
- 保持了陰陽屬性的原有顏色設置

### 修改檔案

- 修改 `scripts/main.js`：
  - 更新了抽出卡片的五行屬性顏色設置，將所有五行屬性顏色統一為白色
  - 更新了詳細視圖中的五行屬性顏色設置，將所有五行屬性顏色統一為白色

## [1.1.11] - 2024-07-09

### 修復

- 微調卡片詳情視圖中屬性文字的位置，找到最佳折衷點
- 將屬性文字向右調整，從right: 15px改為right: 8px
- 調整了padding和移動設備上的相應樣式

### 修改檔案

- 修改 `styles/main.css`：
  - 更新了 `full-card-attribute` 樣式，調整了 `padding: 3px 15px 3px 12px` 和 `right: 8px` 屬性
  - 在移動設備媒體查詢中調整了相應的padding和right值

## [1.1.10] - 2024-07-09

### 修復

- 採用更簡單的方法修復卡片詳情視圖中屬性文字被遮擋的問題
- 將屬性文字向左移動，增加右側padding，確保文字完全可見
- 調整了移動設備上的相應樣式

### 修改檔案

- 修改 `styles/main.css`：
  - 更新了 `full-card-attribute` 樣式，添加了 `padding: 3px 20px 3px 12px` 和 `right: 15px` 屬性
  - 在移動設備媒體查詢中調整了相應的padding和right值

## [1.1.9] - 2024-07-09

### 修復

- 保持卡片詳情視圖中的標題和屬性在同一行顯示，同時確保屬性文字完全可見
- 優化了屬性文字的顯示效果，增加了z-index和定位屬性
- 調整了移動設備上的顯示比例，確保在小螢幕上也能正常顯示

### 修改檔案

- 修改 `styles/main.css`：
  - 將 `full-card-header` 樣式改回水平佈局 `flex-direction: row`
  - 更新了 `full-card-attribute` 樣式，添加了 `min-width: 150px`、`position: relative`、`z-index: 5` 和 `margin-left: 5px` 屬性
  - 在移動設備媒體查詢中添加了 `max-width: 60%` 限制卡片標題寬度

## [1.1.8] - 2024-07-09

### 修復

- 進一步修復了卡片詳情視圖中屬性文字被遮擋的問題
- 重新設計了卡片詳情視圖的佈局，將卡片標題和屬性分成兩行顯示
- 優化了屬性文字的顯示效果，確保完全可見

### 修改檔案

- 修改 `styles/main.css`：
  - 更新了 `full-card-header` 樣式，改為 `flex-direction: column` 垂直佈局
  - 更新了 `full-card-number` 樣式，設置 `text-align: center` 和 `width: 100%`
  - 更新了 `full-card-attribute` 樣式，設置 `text-align: center`
  - 調整了移動設備上的相應樣式

## [1.1.7] - 2024-07-09

### 修復

- 修復了卡片詳情視圖中屬性文字（陰|木才）被部分遮擋的問題
- 優化了卡片詳情視圖的佈局，確保屬性文字能夠完整顯示
- 改進了移動設備上的顯示效果

### 修改檔案

- 修改 `styles/main.css`：
  - 更新了 `full-card-header` 樣式，添加了 `flex-wrap: nowrap` 和 `gap: 10px` 屬性
  - 更新了 `full-card-number` 樣式，添加了 `flex: 1`、`white-space: nowrap`、`overflow: hidden` 和 `text-overflow: ellipsis` 屬性
  - 更新了 `full-card-attribute` 樣式，添加了 `min-width: 120px`、`text-align: right`、`white-space: nowrap`、`overflow: visible` 和 `flex-shrink: 0` 屬性
  - 在移動設備媒體查詢中添加了相應的樣式調整

## [1.1.6] - 2024-07-09

### 改進

- 大幅簡化了卡片圖片路徑處理邏輯，採用標準化的資料夾和檔案命名方式
- 所有圖片資料夾現在使用純數字命名（例如 "1", "2", "3" 等）
- 所有圖片檔案統一命名為 "01.png"
- 移除了複雜的路徑查找邏輯，提高了代碼的可讀性和效能
- 創建了 `rename_image_folders.py` 腳本，用於自動化重命名資料夾和圖片檔案

### 修改檔案

- 修改 `scripts/main.js`：
  - 簡化了 `getCardImagePath` 函數，直接返回標準化的圖片路徑
- 新增 `rename_image_folders.py`：
  - 將資料夾名稱只保留前面的數字
  - 將每個資料夾中的圖片重命名為 "01.png"
  - 刪除其他檔案（如 desktop.ini 和 hexagram_*_urls.txt）

## [1.1.5] - 2024-07-09

### 修復

- 改進了卡片圖片路徑處理邏輯，現在能夠自動嘗試多種可能的圖片檔案名稱和擴展名
- 增加了對各種資料夾命名格式的支持，包括純數字、帶前導零的數字和帶卦名的資料夾
- 擴展了可能的圖片檔案名稱列表，提高了找到正確圖片的機率

### 修改檔案

- 修改 `scripts/main.js`：
  - 更新了 `getCardImagePath` 函數，使其能夠處理各種資料夾命名格式和圖片檔案名稱
  - 添加了更多可能的圖片檔案名稱模式和擴展名

## [1.1.4] - 2024-07-09

### 修復

- 簡化了卡片圖片路徑處理邏輯，現在只使用數字作為索引，不再依賴卦名
- 移除了複雜的目錄映射邏輯，提高了代碼的可維護性
- 增加了對前導零資料夾名稱的支持（例如 "01" 和 "1"）

### 修改檔案

- 修改 `scripts/main.js`：
  - 更新了 `getCardImagePath` 函數，使其只使用數字索引
  - 移除了 `cardFolderMap` 變數和相關邏輯
  - 在 `loadYijingCardData` 函數中移除了目錄映射代碼

## [1.1.3] - 2024-07-08

### 修復

- 修復了圖片路徑問題，解決了404錯誤
- 添加了智能圖片路徑查找功能，能夠自動嘗試多種可能的圖片路徑
- 改進了圖片加載失敗時的處理邏輯，提供更好的備用方案

### 修改檔案

- 修改 `scripts/main.js`：添加了卡片目錄映射和圖片路徑處理函數，優化了圖片加載邏輯

## [1.1.2] - 2024-07-08

### 改進

- 修復卡片背面顯示問題，保持原有的星星形狀，不在背面顯示資訊
- 確保放置區的卡片顯示對應的圖片，每張卡片顯示正確的圖像
- 點擊放置區卡片時顯示完整的卡片視圖，包括卦象名稱、陰陽屬性、圖片和卦詞
- 優化了卡片詳細視圖的顯示效果，使其更接近實際卡片的外觀

### 修改檔案

- 修改 `scripts/main.js`：更新了卡片顯示邏輯，改進了詳細視圖的顯示方式
- 修改 `styles/main.css`：添加了完整卡片視圖的樣式

## [1.1.1] - 2024-07-08

### 改進

- 使用JSON文件（易經卡基本資料.json）替代Excel文件來加載易經卦卡資料
- 優化了數據加載邏輯，提高了加載效率和穩定性

### 修改檔案

- 修改 `scripts/main.js`：更新了loadYijingCardData函數，使用JSON文件加載數據

## [1.1.0] - 2024-07-08

### 新增

- 為易經卦卡添加了圖片顯示功能，替換原有的數字顯示
- 在卡片上添加了卦象名稱、陰陽屬性和卦詞信息
- 根據五行屬性設置不同的顏色：水(灰色)、土(土黃色)、金(白色)、木(綠色)、火(紅色)
- 根據陰陽屬性設置不同的顏色：陰(藍色)、陽(黃色)

### 修改檔案

- 修改 `scripts/main.js`：添加了從卡片描述中提取卦象信息的功能，並更新了卡片顯示邏輯
- 修改 `styles/main.css`：添加了新的卡片樣式，支持圖片和信息的顯示

## [1.0.2] - 2024-07-01

### 改進

- 添加了API請求的指數退避重試機制，處理429 Too Many Requests錯誤
- 增加了API請求之間的延遲時間，從固定2秒增加到隨機5-10秒
- 添加了新的命令行參數：`--max-retries`和`--initial-delay`，用於控制重試行為

## [1.0.1] - 2024-07-01

### 修復

- 修復了無法處理特殊格式卦號的問題（例如「64火水未濟」）
- 使用正則表達式提取卦號，提高了穩定性

## [1.0.0] - 2024-07-01

### 新增

- 創建了易經卦象說明生成器腳本 `generate_yijing_cards.py`
- 支持從Excel檔案中讀取卦象資料
- 使用Gemini API生成說明內容和關鍵字
- 生成MD格式的卦象說明檔案
- 支持指定處理的卦象範圍
- 支持強制重新生成已存在的檔案
- 支持測試運行模式
- 添加了使用說明文檔 `README_yijing_generator.md`

### 修改檔案

- 新增 `generate_yijing_cards.py`
- 新增 `README_yijing_generator.md`
- 新增 `CHANGELOG.md`

## 1.0.0 (2024-03-08)

### 新增
- 創建 `move_yijing_images.py` 腳本，用於將 yijing 資料夾中所有子資料夾的圖片移動到一個新的目標資料夾
- 添加命令行參數支援，可以自定義源資料夾和目標資料夾
- 添加 README.md 文件，說明如何使用腳本

### 技術細節
- 使用 `os` 和 `shutil` 模組處理檔案操作
- 使用 `argparse` 模組處理命令行參數
- 支援多種圖片格式：.png, .jpg, .jpeg, .gif, .bmp 